@PART:HAS[@MODULE[ModuleResourceConverter]:HAS[@INPUT_RESOURCE:HAS[#ResourceName[Ore]],@OUTPUT_RESOURCE:HAS[#ResourceName[MonoPropellant]]]]:FOR[zzz_ImmersiveChemicalPropulsion]
{
    @MODULE[ModuleResourceConverter]:HAS[@INPUT_RESOURCE:HAS[#ResourceName[Ore]],@OUTPUT_RESOURCE:HAS[#ResourceName[MonoPropellant]]]
    {
        @OUTPUT_RESOURCE
        {
            @ResourceName = Water
            @Ratio *= 5
        }
    }
    -MODULE[ModuleResourceConverter]:HAS[@INPUT_RESOURCE:HAS[#ResourceName[Ore]],@OUTPUT_RESOURCE:HAS[#ResourceName[LiquidFuel]]],* {}
    -MODULE[ModuleResourceConverter]:HAS[@INPUT_RESOURCE:HAS[#ResourceName[Ore]],@OUTPUT_RESOURCE:HAS[#ResourceName[Oxidizer]]],* {}
    -MODULE[ModuleResourceConverter]:HAS[@INPUT_RESOURCE:HAS[#ResourceName[Ore]],@OUTPUT_RESOURCE:HAS[#ResourceName[MonoPropellant]]],* {}
    -MODULE[ModuleResourceConverter]:HAS[#Tag[CryoTanks_*]],* {}
	
    +MODULE[ModuleResourceConverter]:HAS[@INPUT_RESOURCE:HAS[#ResourceName[Ore]],@OUTPUT_RESOURCE:HAS[#ResourceName[Water]]]
	{
		@ConverterName = #LOC_ImmersiveChemicalPropulsion_ISRU_Hydrazine_ConverterName
		@StartActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_Hydrazine_StartActionName
		@StopActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_Hydrazine_StopActionName
		
		@OUTPUT_RESOURCE
		{
			@ResourceName = Hydrazine
		}
	}
    +MODULE[ModuleResourceConverter]:HAS[@INPUT_RESOURCE:HAS[#ResourceName[Ore]],@OUTPUT_RESOURCE:HAS[#ResourceName[Water]]]
	{
		@ConverterName = #LOC_ImmersiveChemicalPropulsion_ISRU_NTO_ConverterName
		@StartActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_NTO_StartActionName
		@StopActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_NTO_StopActionName
		
		@OUTPUT_RESOURCE
		{
			@ResourceName = NTO
			@Ratio /= 1.45
		}
	}
    +MODULE[ModuleResourceConverter]:HAS[@INPUT_RESOURCE:HAS[#ResourceName[Ore]],@OUTPUT_RESOURCE:HAS[#ResourceName[Water]]]
	{
		@ConverterName = #LOC_ImmersiveChemicalPropulsion_ISRU_Hydrazine_NTO_ConverterName
		@StartActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_Hydrazine_NTO_StartActionName
		@StopActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_Hydrazine_NTO_StopActionName
		
		+OUTPUT_RESOURCE
		{
			@ResourceName = NTO
			@Ratio *= 3
			@Ratio /= 6.35 // 2*1 + 3*1.45
		}
		@OUTPUT_RESOURCE
		{
			@ResourceName = Hydrazine
			@Ratio *= 2
			@Ratio /= 6.35 // 2*1 + 3*1.45
		}
	}
    +MODULE[ModuleResourceConverter]:HAS[@INPUT_RESOURCE:HAS[#ResourceName[Ore]],@OUTPUT_RESOURCE:HAS[#ResourceName[Water]]]
	{
		@ConverterName = #LOC_ImmersiveChemicalPropulsion_ISRU_Kerosene_ConverterName
		@StartActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_Kerosene_StartActionName
		@StopActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_Kerosene_StopActionName
		
		@OUTPUT_RESOURCE
		{
			@ResourceName = Kerosene
			@Ratio /= 0.82
		}
	}
    +MODULE[ModuleResourceConverter]:HAS[@INPUT_RESOURCE:HAS[#ResourceName[Ore]],@OUTPUT_RESOURCE:HAS[#ResourceName[Water]]]
	{
		@ConverterName = #LOC_ImmersiveChemicalPropulsion_ISRU_LqdOxygen_ConverterName
		@StartActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_LqdOxygen_StartActionName
		@StopActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_LqdOxygen_StopActionName
		
		@OUTPUT_RESOURCE
		{
			@ResourceName = LqdOxygen
			@Ratio /= 1.141
		}
	}
    +MODULE[ModuleResourceConverter]:HAS[@INPUT_RESOURCE:HAS[#ResourceName[Ore]],@OUTPUT_RESOURCE:HAS[#ResourceName[Water]]]
	{
		@ConverterName = #LOC_ImmersiveChemicalPropulsion_ISRU_Kerosene_LqdOxygen_ConverterName
		@StartActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_Kerosene_LqdOxygen_StartActionName
		@StopActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_Kerosene_LqdOxygen_StopActionName
		
		+OUTPUT_RESOURCE
		{
			@ResourceName = LqdOxygen
			@Ratio *= 5
			@Ratio /= 8.165 // 3*0.82 + 5*1.141
		}
		@OUTPUT_RESOURCE
		{
			@ResourceName = Kerosene
			@Ratio *= 3
			@Ratio /= 8.165 // 3*0.82 + 5*1.141
		}
	}
    +MODULE[ModuleResourceConverter]:HAS[@INPUT_RESOURCE:HAS[#ResourceName[Ore]],@OUTPUT_RESOURCE:HAS[#ResourceName[Water]]]
	{
		@ConverterName = #LOC_ImmersiveChemicalPropulsion_ISRU_LqdHydrogen_ConverterName
		@StartActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_LqdHydrogen_StartActionName
		@StopActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_LqdHydrogen_StopActionName
		
		@OUTPUT_RESOURCE
		{
			@ResourceName = LqdHydrogen
			@Ratio /= 0.07085
		}
	}
    +MODULE[ModuleResourceConverter]:HAS[@INPUT_RESOURCE:HAS[#ResourceName[Ore]],@OUTPUT_RESOURCE:HAS[#ResourceName[Water]]]
	{
		@ConverterName = #LOC_ImmersiveChemicalPropulsion_ISRU_LqdHydrogen_LqdOxygen_ConverterName
		@StartActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_LqdHydrogen_LqdOxygen_StartActionName
		@StopActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_LqdHydrogen_LqdOxygen_StopActionName
		
		+OUTPUT_RESOURCE
		{
			@ResourceName = LqdOxygen
			@Ratio *= 1
			@Ratio /= 1.35355 // 3*0.07085 + 1*1.141
		}
		@OUTPUT_RESOURCE
		{
			@ResourceName = LqdHydrogen
			@Ratio *= 3
			@Ratio /= 1.35355 // 3*0.07085 + 1*1.141
		}
	}
    +MODULE[ModuleResourceConverter]:HAS[@INPUT_RESOURCE:HAS[#ResourceName[Ore]],@OUTPUT_RESOURCE:HAS[#ResourceName[Water]]]
	{
		@ConverterName = #LOC_ImmersiveChemicalPropulsion_ISRU_LqdMethane_ConverterName
		@StartActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_LqdMethane_StartActionName
		@StopActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_LqdMethane_StopActionName
		
		@OUTPUT_RESOURCE
		{
			@ResourceName = LqdMethane
			@Ratio /= 0.42561
		}
	}
    +MODULE[ModuleResourceConverter]:HAS[@INPUT_RESOURCE:HAS[#ResourceName[Ore]],@OUTPUT_RESOURCE:HAS[#ResourceName[Water]]]
	{
		@ConverterName = #LOC_ImmersiveChemicalPropulsion_ISRU_LqdMethane_LqdOxygen_ConverterName
		@StartActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_LqdMethane_LqdOxygen_StartActionName
		@StopActionName = #LOC_ImmersiveChemicalPropulsion_ISRU_LqdMethane_LqdOxygen_StopActionName
		
		+OUTPUT_RESOURCE
		{
			@ResourceName = LqdOxygen
			@Ratio *= 9
			@Ratio /= 13.24827 // 7*0.42561 + 9*1.141
		}
		@OUTPUT_RESOURCE
		{
			@ResourceName = LqdMethane
			@Ratio *= 7
			@Ratio /= 13.24827 // 7*0.42561 + 9*1.141
		}
	}
    
    -MODULE[ModuleResourceConverter]:HAS[@INPUT_RESOURCE:HAS[#ResourceName[Ore]],@OUTPUT_RESOURCE:HAS[#ResourceName[Water]]],* {}
}