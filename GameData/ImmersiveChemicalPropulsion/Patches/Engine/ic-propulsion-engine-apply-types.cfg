// Assign Hydrazine/NTO to all engines not directly supported, so at least they'll work
@PART:HAS[@MODULE[ModuleEngines*]:HAS[@PROPELLANT[LiquidFuel],@PROPELLANT[Oxidizer],~icPropellantType]]:FOR[zzz_ImmersiveChemicalPropulsion]
{
	@MODULE[ModuleEngines*]:HAS[@PROPELLANT[LiquidFuel],@PROPELLANT[Oxidizer],~icPropellantType]
	{
		icPropellantType = Hydrazine_NTO
	}
}

@PART:HAS[@MODULE[ModuleEngines*]]:FOR[zzz_ImmersiveChemicalPropulsion]
{
	@title ^= : Liquid Fueled : Liquid Fuel :
}
@PART:HAS[@MODULE[ModuleEngines*]:HAS[#icPropellantType],@MODULE[MultiModeEngine]]:FOR[zzz_ImmersiveChemicalPropulsion]
{
	@title ^= : Liquid Fuel : Multimode Liquid Fuel :
}

@PART:HAS[@MODULE[ModuleEngines*]:HAS[#icPropellantType],@RESOURCE[LiquidFuel],@RESOURCE[Oxidizer]]:FOR[zzz_ImmersiveChemicalPropulsion]
{
	@RESOURCE[LiquidFuel]
	{
		@amount /= 0.09
		@maxAmount /= 0.09
	}
	@RESOURCE[Oxidizer]
	{
		@amount /= 0.11
		@maxAmount /= 0.11
	}
}

@PART:HAS[@MODULE[ModuleEngines*]:HAS[#icPropellantType[Hydrazine_NTO]]]:FOR[zzz_ImmersiveChemicalPropulsion]
{
	@title ^= : Liquid Fuel : Hypergolic :
	@MODULE[ModuleEngines*]:HAS[#icPropellantType[Hydrazine_NTO]]
	{
		-PROPELLANT,* {}
		PROPELLANT
		{
			name = Hydrazine
			ratio = 2
			DrawGauge = True
		}
		PROPELLANT
		{
			name = NTO
			ratio = 3
		}
	}
	
	@RESOURCE[LiquidFuel]
	{
		@name = Hydrazine
		@amount *= 0.4
		@maxAmount *= 0.4
	}
	@RESOURCE[Oxidizer]
	{
		@name = NTO
		@amount *= 0.6
		@maxAmount *= 0.6
	}
}

@PART:HAS[@MODULE[ModuleEngines*]:HAS[#icPropellantType[Kerosene_LqdOxygen]]]:FOR[zzz_ImmersiveChemicalPropulsion]
{
	@title ^= : Liquid Fuel : Kerolox :
	@MODULE[ModuleEngines*]:HAS[#icPropellantType[Kerosene_LqdOxygen]]
	{
		-PROPELLANT,* {}
		PROPELLANT
		{
			name = Kerosene
			ratio = 3
			DrawGauge = True
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 5
		}
	}
	
	@RESOURCE[LiquidFuel]
	{
		@name = Kerosene
		@amount *= 0.375
		@maxAmount *= 0.375
	}
	@RESOURCE[Oxidizer]
	{
		@name = LqdOxygen
		@amount *= 0.625
		@maxAmount *= 0.625
	}
}

@PART:HAS[@MODULE[ModuleEngines*]:HAS[#icPropellantType[LqdMethane_LqdOxygen]]]:FOR[zzz_ImmersiveChemicalPropulsion]
{
	@title ^= : Liquid (Fuel|Methane) : Methalox :
	@MODULE[ModuleEngines*]:HAS[#icPropellantType[LqdMethane_LqdOxygen]]
	{
		-PROPELLANT,* {}
		PROPELLANT
		{
			name = LqdMethane
			ratio = 7
			DrawGauge = True
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 9
		}
	}
	
	@RESOURCE[LiquidFuel]
	{
		@name = LqdMethane
		@amount *= 0.4375
		@maxAmount *= 0.4375
	}
	@RESOURCE[Oxidizer]
	{
		@name = LqdOxygen
		@amount *= 0.5625
		@maxAmount *= 0.5625
	}
}

@PART:HAS[@MODULE[ModuleEngines*]:HAS[#icPropellantType[LqdHydrogen_LqdOxygen]]]:FOR[zzz_ImmersiveChemicalPropulsion]
{
	@title ^= : Liquid (Fuel|Hydrogen) : Hydrolox :
	@MODULE[ModuleEngines*]:HAS[#icPropellantType[LqdHydrogen_LqdOxygen]]
	{
		-PROPELLANT,* {}
		PROPELLANT
		{
			name = LqdHydrogen
			ratio = 3
			DrawGauge = True
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 1
		}
	}
	
	@RESOURCE[LiquidFuel]
	{
		@name = LqdHydrogen
		@amount *= 0.75
		@maxAmount *= 0.75
	}
	@RESOURCE[Oxidizer]
	{
		@name = LqdOxygen
		@amount *= 0.25
		@maxAmount *= 0.25
	}
}

@PART:HAS[@MODULE[ModuleEngines*]:HAS[#icPropellantType[Kerosene_LqdHydrogen_LqdOxygen]]]:FOR[zzz_ImmersiveChemicalPropulsion]
{
	@MODULE[ModuleEngines*]:HAS[#icPropellantType[Kerosene_LqdHydrogen_LqdOxygen]]
	{
		// One third kerolox + two thirds hydrolox
		-PROPELLANT,* {}
		PROPELLANT
		{
			name = Kerosene
			ratio = 1
			DrawGauge = True
		}
		PROPELLANT
		{
			name = LqdHydrogen
			ratio = 4
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 3
		}
	}
}

@PART:HAS[@MODULE[ModuleEngines*]:HAS[#icPropellantType[Kerosene_IntakeAir]]]:FOR[zzz_ImmersiveChemicalPropulsion]
{
	@MODULE[ModuleEngines*]:HAS[#icPropellantType[Kerosene_IntakeAir]]
	{
		@PROPELLANT[LiquidFuel]
		{
			@name = Kerosene
			@ratio *= 6
			DrawGauge = True
		}
	}

	@RESOURCE[LiquidFuel]
	{
		@name = Kerosene
	}
}

@PART:HAS[@MODULE[ModuleEngines*]:HAS[#icPropellantType[LqdHydrogen]]]:FOR[zzz_ImmersiveChemicalPropulsion]
{
	@MODULE[ModuleEngines*]:HAS[#icPropellantType[LqdHydrogen]]
	{
		@PROPELLANT[LiquidFuel]
		{
			@name = LqdHydrogen
		}
	}

	@RESOURCE[LiquidFuel]
	{
		@name = LqdHydrogen
	}
}

@PART:HAS[@MODULE[ModuleEngines*]:HAS[#icPropellantType[Hydrazine]]]:FOR[zzz_ImmersiveChemicalPropulsion]
{
	@MODULE[ModuleEngines*]:HAS[#icPropellantType[Hydrazine]]
	{
		@PROPELLANT[MonoPropellant]
		{
			@name = Hydrazine
		}
	}

	@RESOURCE[LiquidFuel]
	{
		@name = Hydrazine
	}
}