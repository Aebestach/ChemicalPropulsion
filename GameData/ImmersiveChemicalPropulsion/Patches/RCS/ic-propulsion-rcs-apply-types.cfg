@PART:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[RCS]]]:AFTER[zzz_CryoTanks]
{
	-MODULE[ModuleB9PartSwitch]:HAS[#moduleID[RCS]],* {}
}

@PART:HAS[@MODULE[ModuleRCS*]:HAS[#icRcsType[monopropellant]]]:FOR[zzz_ImmersiveChemicalPropulsion]
{
	@MODULE[ModuleRCS*]:HAS[#icRcsType[monopropellant]]
	{
		@resourceName = Hydrazine
	}
}

@PART:HAS[@MODULE[ModuleRCS*]:HAS[#icRcsType[bipropellant]]]:FOR[zzz_ImmersiveChemicalPropulsion]
{
	@MODULE[ModuleRCS*]:HAS[#icRcsType[bipropellant]]
	{
		@resourceName = Hydrazine
		
		@PROPELLANT[LiquidFuel]
		{
			@name = Hydrazine
			@ratio = 2
		}
		@PROPELLANT[Oxidizer]
		{
			@name = NTO
			@ratio = 3
		}
	}
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = RCS
		switcherDescription = Propellant
		switcherDescriptionPlural = Propellants
		switchInFlight = False

		SUBTYPE
		{
			name = Hydrazine_NTO
			title = #LOC_ImmersiveChemicalPropulsion_propellant_Hydrazine_NTO_title
			primaryColor = ResourceColorMonoPropellant
			secondaryColor = BloodRed
			descriptionDetail = #LOC_ImmersiveChemicalPropulsion_propellant_Hydrazine_NTO_description
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleRCS
				}
				DATA
				{
					PROPELLANT
					{
						name = Hydrazine
						ratio = 2
					}
					PROPELLANT
					{
						name = NTO
						ratio = 3
					}
					atmosphereCurve
					{
						key = 0 270
						key = 1 135
						key = 4 0.001
					}
				}
			}
		}
		SUBTYPE
		{
			name = Kerosene_LqdOxygen
			title = #LOC_ImmersiveChemicalPropulsion_propellant_Kerosene_LqdOxygen_title
			primaryColor = ResourceColorLiquidFuel
			secondaryColor = ResourceColorOxidizer
			descriptionDetail = #LOC_ImmersiveChemicalPropulsion_propellant_Kerosene_LqdOxygen_description
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleRCS
				}
				DATA
				{
					PROPELLANT
					{
						name = Kerosene
						ratio = 3
					}
					PROPELLANT
					{
						name = LqdOxygen
						ratio = 5
					}
					atmosphereCurve
					{
						key = 0 270
						key = 1 135
						key = 4 0.001
					}
				}
			}
		}
		SUBTYPE
		{
			name = LqdMethane_LqdOxygen
			title = #LOC_ImmersiveChemicalPropulsion_propellant_LqdMethane_LqdOxygen_title
			primaryColor = ResourceColorLqdMethane
			secondaryColor = ResourceColorOxidizer
			descriptionDetail = #LOC_ImmersiveChemicalPropulsion_propellant_LqdMethane_LqdOxygen_description
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleRCS
				}
				DATA
				{
					PROPELLANT
					{
						name = LqdMethane
						ratio = 2
					}
					PROPELLANT
					{
						name = LqdOxygen
						ratio = 3
					}
					atmosphereCurve
					{
						key = 0 300
						key = 1 150
						key = 4 0.001
					}
				}
			}
		}
		SUBTYPE
		{
			name = LqdHydrogen_LqdOxygen
			title = #LOC_ImmersiveChemicalPropulsion_propellant_LqdHydrogen_LqdOxygen_title
			primaryColor = ResourceColorLqdHydrogen
			secondaryColor = ResourceColorOxidizer
			descriptionDetail = #LOC_ImmersiveChemicalPropulsion_propellant_LqdHydrogen_LqdOxygen_description
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleRCS
				}
				DATA
				{
					PROPELLANT
					{
						name = LqdHydrogen
						ratio = 3
					}
					PROPELLANT
					{
						name = LqdOxygen
						ratio = 1
					}
					atmosphereCurve
					{
						key = 0 330
						key = 1 165
						key = 4 0.001
					}
				}
			}
		}
	}
}

@PART:HAS[@MODULE[ModuleRCSFX]:HAS[#icRcsType[bipropellant]]]:FOR[zzz_ImmersiveChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[RCS]]
	{
		@SUBTYPE,*
		{
			@MODULE
			{
				@IDENTIFIER
				{
					@name = ModuleRCSFX
				}
			}
		}
	}
}