// Bipropellant
@PART:HAS[@RESOURCE[LiquidFuel],@RESOURCE[Oxidizer],!MODULE:HAS[@PROPELLANT[LiquidFuel],@PROPELLANT[Oxidizer]]]:BEFORE[ChemicalPropulsion]
{
	chemTechResource = fuelLqdAmmonia
	chemTechResource = fuelKerosene
	chemTechResource = fuelHydrazine
	chemTechResource = fuelLqdMethane
	chemTechResource = fuelLqdHydrogen
	chemTechResource = oxidizerHTP
	chemTechResource = oxidizerNTO
	chemTechResource = oxidizerLqdOxygen
}
@PART:HAS[@RESOURCE[LiquidFuel],@RESOURCE[Oxidizer]]:BEFORE[ChemicalPropulsion]
{
	chemTechFuelVolume = #$RESOURCE[LiquidFuel]/maxAmount$
	chemTechFuelMass = #$chemTechFuelVolume$
	@chemTechFuelMass *= -0.000625
	-RESOURCE[LiquidFuel] {}

	chemTechOxidizerVolume = #$RESOURCE[Oxidizer]/maxAmount$
	chemTechOxidizerMass = #$chemTechOxidizerVolume$
	@chemTechOxidizerMass *= -0.000625
	-RESOURCE[Oxidizer] {}

	chemTechTankVolume = #$chemTechFuelVolume$
	@chemTechTankVolume += #$chemTechOxidizerVolume$
	chemTechTankMass = #$chemTechFuelMass$
	@chemTechTankMass += #$chemTechOxidizerMass$
}
// Aviation
@PART:HAS[@RESOURCE[LiquidFuel],!RESOURCE[Oxidizer],!MODULE:HAS[@PROPELLANT[LiquidFuel]]]:BEFORE[ChemicalPropulsion]
{
	chemTechResource = fuelKerosene
	chemTechResource = fuelLqdHydrogen
	chemTechResource = oxidizerLqdOxygen
}
@PART:HAS[@RESOURCE[LiquidFuel],!RESOURCE[Oxidizer]]:BEFORE[ChemicalPropulsion]
{
	chemTechTankVolume = #$RESOURCE[LiquidFuel]/maxAmount$
	chemTechTankMass = #$chemTechTankVolume$
	@chemTechTankMass *= -0.000625
	-RESOURCE[LiquidFuel] {}
}
// Cryogenic
@PART:HAS[@RESOURCE[LqdHydrogen],!RESOURCE[Oxidizer],!MODULE:HAS[@PROPELLANT[LqdHydrogen]]]:BEFORE[ChemicalPropulsion]
{
	chemTechResource = propellantLqdAmmonia
	chemTechResource = propellantLqdHydrogen
	chemTechResource = propellantLqdMethane
	chemTechResource = propellantLqdOxygen
}
@PART:HAS[@RESOURCE[LqdHydrogen],!RESOURCE[Oxidizer]]:BEFORE[ChemicalPropulsion]
{
	chemTechTankVolume = #$RESOURCE[LqdHydrogen]/maxAmount$
	@chemTechTankVolume /= 7.5
	chemTechTankMass = #$chemTechTankVolume$
	@chemTechTankMass *= -0.000106275
	-RESOURCE[LqdHydrogen] {}
}
// Monopropellant
@PART:HAS[@RESOURCE[MonoPropellant],!MODULE:HAS[@PROPELLANT[MonoPropellant]]]:BEFORE[ChemicalPropulsion]
{
	chemTechResource = propellantHTP
	chemTechResource = propellantHydrazine
	chemTechResource = propellantTEATEB
}
@PART:HAS[@RESOURCE[MonoPropellant]]:BEFORE[ChemicalPropulsion]
{
	chemTechTankVolume = #$RESOURCE[MonoPropellant]/maxAmount$
	@chemTechTankVolume /= 1.25
	chemTechTankMass = #$chemTechTankVolume$
	@chemTechTankMass *= -0.000625
	-RESOURCE[MonoPropellant] {}
}
// Solid fuel
@PART:HAS[@RESOURCE[SolidFuel]]:BEFORE[ChemicalPropulsion]
{
	chemTechTankVolume = #$RESOURCE[SolidFuel]/maxAmount$
	@chemTechTankVolume /= 1
	chemTechTankMass = #$chemTechTankVolume$
	@chemTechTankMass *= -0.000625
	-RESOURCE[SolidFuel] {}
}