// Remove existing RCS switch
@PART:HAS[@MODULE[ModuleRCS*]:HAS[#chemTechEngineType]]:BEFORE[zzz_ChemicalPropulsion]
{
	-MODULE[ModuleB9PartSwitch]:HAS[#moduleID[RCS]] {}
}

@PART:HAS[@MODULE:HAS[#chemTechEngineType[hydrogen]]]:BEFORE[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleFuelMixerPropellant]:HAS[#moduleID[chemTechFuelMixerPropellant],~resourceName]
	{
		resourceName = LqdHydrogen
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerPropellantSwitch]]
	{
		chemTechSwitchResourceName = LqdHydrogen
		chemTechSwitchResourceName = LqdMethane
		chemTechSwitchResourceName = LqdAmmonia
	}
}

@PART:HAS[@MODULE:HAS[#chemTechEngineType[monopropellant]]]:BEFORE[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleFuelMixerPropellant]:HAS[#moduleID[chemTechFuelMixerPropellant],~resourceName]
	{
		// Base stats are for hydrazine, while HTP is the default option and has reduced performance
		resourceName = Hydrazine
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerPropellantSwitch]]
	{
		chemTechSwitchResourceName = HTP
		chemTechSwitchResourceName = Hydrazine
	}
}

@PART:HAS[@MODULE:HAS[#chemTechEngineType[bipropellantAmmonilox]]]:BEFORE[zzz_ChemicalPropulsion]
{
	// Fuel
	@MODULE[ModuleFuelMixerPropellant]:HAS[#moduleID[chemTechFuelMixerFuel],~resourceName]
	{
		resourceName = LqdAmmonia
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch]]
	{
		chemTechSwitchResourceName = LqdAmmonia
	}

	// Oxidizer
	@MODULE[ModuleFuelMixerPropellant]:HAS[#moduleID[chemTechFuelMixerOxidizer],~resourceName]
	{
		resourceName = LqdOxygen
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerOxidizerSwitch]]
	{
		chemTechSwitchResourceName = LqdOxygen
	}
}

@PART:HAS[@MODULE:HAS[#chemTechEngineType[bipropellantKeroxide]]]:BEFORE[zzz_ChemicalPropulsion]
{
	// Fuel
	@MODULE[ModuleFuelMixerPropellant]:HAS[#moduleID[chemTechFuelMixerFuel],~resourceName]
	{
		resourceName = Kerosene
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch]]
	{
		chemTechSwitchResourceName = Kerosene
	}

	// Oxidizer
	@MODULE[ModuleFuelMixerPropellant]:HAS[#moduleID[chemTechFuelMixerOxidizer],~resourceName]
	{
		resourceName = HTP
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerOxidizerSwitch]]
	{
		chemTechSwitchResourceName = HTP
	}
}

@PART:HAS[@MODULE:HAS[#chemTechEngineType[bipropellantHypergolic]]]:BEFORE[zzz_ChemicalPropulsion]
{
	// Fuel
	@MODULE[ModuleFuelMixerPropellant]:HAS[#moduleID[chemTechFuelMixerFuel],~resourceName]
	{
		resourceName = Hydrazine
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch]]
	{
		chemTechSwitchResourceName = Hydrazine
	}

	// Oxidizer
	@MODULE[ModuleFuelMixerPropellant]:HAS[#moduleID[chemTechFuelMixerOxidizer],~resourceName]
	{
		resourceName = NTO
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerOxidizerSwitch]]
	{
		chemTechSwitchResourceName = NTO
	}
}

@PART:HAS[@MODULE:HAS[#chemTechEngineType[bipropellantKerolox]]]:BEFORE[zzz_ChemicalPropulsion]
{
	// Fuel
	@MODULE[ModuleFuelMixerPropellant]:HAS[#moduleID[chemTechFuelMixerFuel],~resourceName]
	{
		resourceName = Kerosene
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch]]
	{
		chemTechSwitchResourceName = Kerosene
	}

	// Oxidizer
	@MODULE[ModuleFuelMixerPropellant]:HAS[#moduleID[chemTechFuelMixerOxidizer],~resourceName]
	{
		resourceName = LqdOxygen
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerOxidizerSwitch]]
	{
		chemTechSwitchResourceName = LqdOxygen
	}
}

@PART:HAS[@MODULE:HAS[#chemTechEngineType[bipropellantMethalox]]]:BEFORE[zzz_ChemicalPropulsion]
{
	// Fuel
	@MODULE[ModuleFuelMixerPropellant]:HAS[#moduleID[chemTechFuelMixerFuel],~resourceName]
	{
		resourceName = LqdMethane
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch]]
	{
		chemTechSwitchResourceName = LqdMethane
	}

	// Oxidizer
	@MODULE[ModuleFuelMixerPropellant]:HAS[#moduleID[chemTechFuelMixerOxidizer],~resourceName]
	{
		resourceName = LqdOxygen
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerOxidizerSwitch]]
	{
		chemTechSwitchResourceName = LqdOxygen
	}
}

@PART:HAS[@MODULE:HAS[#chemTechEngineType[bipropellantHydrolox]]]:BEFORE[zzz_ChemicalPropulsion]
{
	// Fuel
	@MODULE[ModuleFuelMixerPropellant]:HAS[#moduleID[chemTechFuelMixerFuel],~resourceName]
	{
		resourceName = LqdHydrogen
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch]]
	{
		chemTechSwitchResourceName = LqdHydrogen
	}

	// Oxidizer
	@MODULE[ModuleFuelMixerPropellant]:HAS[#moduleID[chemTechFuelMixerOxidizer],~resourceName]
	{
		resourceName = LqdOxygen
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerOxidizerSwitch]]
	{
		chemTechSwitchResourceName = LqdOxygen
	}
}

@PART:HAS[@MODULE:HAS[#chemTechEngineType[jetKerosene]]]:BEFORE[zzz_ChemicalPropulsion]
{
	// Fuel
	@MODULE[ModuleFuelMixerPropellant]:HAS[#moduleID[chemTechFuelMixerFuel],~resourceName]
	{
		resourceName = Kerosene
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch]]
	{
		chemTechSwitchResourceName = Kerosene
	}
}

@PART:HAS[@MODULE:HAS[#chemTechEngineType[jetHydrogen]]]:BEFORE[zzz_ChemicalPropulsion]
{
	// Fuel
	@MODULE[ModuleFuelMixerPropellant]:HAS[#moduleID[chemTechFuelMixerFuel],~resourceName]
	{
		resourceName = LqdHydrogen
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch]]
	{
		chemTechSwitchResourceName = LqdHydrogen
	}
}