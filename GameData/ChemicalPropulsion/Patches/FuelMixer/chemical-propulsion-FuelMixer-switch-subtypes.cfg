// Part switch subtypes
@PART:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerPropellantSwitch]]]:AFTER[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerPropellantSwitch],#chemTechSwitchResourceName[HTP]]
	{
		SUBTYPE
		{
			name = HTP
			title = #LOC_ChemicalCore_HTP_title
			primaryColor = #$@ChemicalCoreResourceColors/HTP$
			secondaryColor = #$@ChemicalCoreResourceColors/HTP$
			upgradeRequired = chemical-propulsion-partupgrade-HTP
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerPropellantSwitch],#chemTechSwitchResourceName[Hydrazine]]
	{
		SUBTYPE
		{
			name = Hydrazine
			title = #LOC_ChemicalCore_Hydrazine_title
			primaryColor = #$@ChemicalCoreResourceColors/Hydrazine$
			secondaryColor = #$@ChemicalCoreResourceColors/Hydrazine$
			upgradeRequired = chemical-propulsion-partupgrade-Hydrazine
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerPropellantSwitch],#chemTechSwitchResourceName[LqdHydrogen]]
	{
		SUBTYPE
		{
			name = LqdHydrogen
			title = #LOC_ChemicalCore_LqdHydrogen_title
			primaryColor = #$@ChemicalCoreResourceColors/LqdHydrogen$
			secondaryColor = #$@ChemicalCoreResourceColors/LqdHydrogen$
			upgradeRequired = chemical-propulsion-partupgrade-LqdHydrogen
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerPropellantSwitch],#chemTechSwitchResourceName[LqdMethane]]
	{
		SUBTYPE
		{
			name = LqdMethane
			title = #LOC_ChemicalCore_LqdMethane_title
			primaryColor = #$@ChemicalCoreResourceColors/LqdMethane$
			secondaryColor = #$@ChemicalCoreResourceColors/LqdMethane$
			upgradeRequired = chemical-propulsion-partupgrade-LqdMethane
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerPropellantSwitch],#chemTechSwitchResourceName[LqdAmmonia]]
	{
		SUBTYPE
		{
			name = LqdAmmonia
			title = #LOC_ChemicalCore_LqdAmmonia_title
			primaryColor = #$@ChemicalCoreResourceColors/LqdAmmonia$
			secondaryColor = #$@ChemicalCoreResourceColors/LqdAmmonia$
			upgradeRequired = chemical-propulsion-partupgrade-LqdAmmonia
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerPropellantSwitch],#chemTechSwitchResourceName[LqdOxygen]]
	{
		SUBTYPE
		{
			name = LqdOxygen
			title = #LOC_ChemicalCore_LqdOxygen_title
			primaryColor = #$@ChemicalCoreResourceColors/LqdOxygen$
			secondaryColor = #$@ChemicalCoreResourceColors/LqdOxygen$
			upgradeRequired = chemical-propulsion-partupgrade-LqdOxygen
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerPropellantSwitch],#chemTechSwitchResourceName[Diborane]]
	{
		SUBTYPE
		{
			name = Diborane
			title = #LOC_ChemicalCore_Diborane_title
			primaryColor = #$@ChemicalCoreResourceColors/Diborane$
			secondaryColor = #$@ChemicalCoreResourceColors/Diborane$
			upgradeRequired = chemical-propulsion-partupgrade-Diborane
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerPropellantSwitch],#chemTechSwitchResourceName[LqdFluroine]]
	{
		SUBTYPE
		{
			name = LqdFluroine
			title = #LOC_ChemicalCore_LqdFluroine_title
			primaryColor = #$@ChemicalCoreResourceColors/LqdFluroine$
			secondaryColor = #$@ChemicalCoreResourceColors/LqdFluroine$
			upgradeRequired = chemical-propulsion-partupgrade-LqdFluroine
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerPropellantSwitch],#chemTechSwitchResourceName[N2F4]]
	{
		SUBTYPE
		{
			name = N2F4
			title = #LOC_ChemicalCore_N2F4_title
			primaryColor = #$@ChemicalCoreResourceColors/N2F4$
			secondaryColor = #$@ChemicalCoreResourceColors/N2F4$
			upgradeRequired = chemical-propulsion-partupgrade-N2F4
		}
	}
}
@PART:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch]]]:AFTER[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch],#chemTechSwitchResourceName[Kerosene]]
	{
		SUBTYPE
		{
			name = Kerosene
			title = #LOC_ChemicalCore_Kerosene_title
			primaryColor = #$@ChemicalCoreResourceColors/Kerosene$
			secondaryColor = #$@ChemicalCoreResourceColors/Kerosene$
			upgradeRequired = chemical-propulsion-partupgrade-Kerosene
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch],#chemTechSwitchResourceName[LqdMethane]]
	{
		SUBTYPE
		{
			name = LqdMethane
			title = #LOC_ChemicalCore_LqdMethane_title
			primaryColor = #$@ChemicalCoreResourceColors/LqdMethane$
			secondaryColor = #$@ChemicalCoreResourceColors/LqdMethane$
			upgradeRequired = chemical-propulsion-partupgrade-LqdMethane
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch],#chemTechSwitchResourceName[LqdHydrogen]]
	{
		SUBTYPE
		{
			name = LqdHydrogen
			title = #LOC_ChemicalCore_LqdHydrogen_title
			primaryColor = #$@ChemicalCoreResourceColors/LqdHydrogen$
			secondaryColor = #$@ChemicalCoreResourceColors/LqdHydrogen$
			upgradeRequired = chemical-propulsion-partupgrade-LqdHydrogen
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch],#chemTechSwitchResourceName[LqdAmmonia]]
	{
		SUBTYPE
		{
			name = LqdAmmonia
			title = #LOC_ChemicalCore_LqdAmmonia_title
			primaryColor = #$@ChemicalCoreResourceColors/LqdAmmonia$
			secondaryColor = #$@ChemicalCoreResourceColors/LqdAmmonia$
			upgradeRequired = chemical-propulsion-partupgrade-LqdAmmonia
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch],#chemTechSwitchResourceName[Hydrazine]]
	{
		SUBTYPE
		{
			name = Hydrazine
			title = #LOC_ChemicalCore_Hydrazine_title
			primaryColor = #$@ChemicalCoreResourceColors/Hydrazine$
			secondaryColor = #$@ChemicalCoreResourceColors/Hydrazine$
			upgradeRequired = chemical-propulsion-partupgrade-Hydrazine
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch],#chemTechSwitchResourceName[Pentaborane]]
	{
		SUBTYPE
		{
			name = Pentaborane
			title = #LOC_ChemicalCore_Pentaborane_title
			primaryColor = #$@ChemicalCoreResourceColors/Pentaborane$
			secondaryColor = #$@ChemicalCoreResourceColors/Pentaborane$
			upgradeRequired = chemical-propulsion-partupgrade-Pentaborane
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch],#chemTechSwitchResourceName[Diborane]]
	{
		SUBTYPE
		{
			name = Diborane
			title = #LOC_ChemicalCore_Diborane_title
			primaryColor = #$@ChemicalCoreResourceColors/Diborane$
			secondaryColor = #$@ChemicalCoreResourceColors/Diborane$
			upgradeRequired = chemical-propulsion-partupgrade-Diborane
		}
	}
}
@PART:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerOxidizerSwitch]]]:AFTER[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerOxidizerSwitch],#chemTechSwitchResourceName[HTP]]
	{
		SUBTYPE
		{
			name = HTP
			title = #LOC_ChemicalCore_HTP_title
			primaryColor = #$@ChemicalCoreResourceColors/HTP$
			secondaryColor = #$@ChemicalCoreResourceColors/HTP$
			upgradeRequired = chemical-propulsion-partupgrade-HTP
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerOxidizerSwitch],#chemTechSwitchResourceName[LqdOxygen]]
	{
		SUBTYPE
		{
			name = LqdOxygen
			title = #LOC_ChemicalCore_LqdOxygen_title
			primaryColor = #$@ChemicalCoreResourceColors/LqdOxygen$
			secondaryColor = #$@ChemicalCoreResourceColors/LqdOxygen$
			upgradeRequired = chemical-propulsion-partupgrade-LqdOxygen
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerOxidizerSwitch],#chemTechSwitchResourceName[NTO]]
	{
		SUBTYPE
		{
			name = NTO
			title = #LOC_ChemicalCore_NTO_title
			primaryColor = #$@ChemicalCoreResourceColors/NTO$
			secondaryColor = #$@ChemicalCoreResourceColors/NTO$
			upgradeRequired = chemical-propulsion-partupgrade-NTO
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerOxidizerSwitch],#chemTechSwitchResourceName[LqdFluorine]]
	{
		SUBTYPE
		{
			name = LqdFluorine
			title = #LOC_ChemicalCore_LqdFluorine_title
			primaryColor = #$@ChemicalCoreResourceColors/LqdFluorine$
			secondaryColor = #$@ChemicalCoreResourceColors/LqdFluorine$
			upgradeRequired = chemical-propulsion-partupgrade-LqdFluorine
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerOxidizerSwitch],#chemTechSwitchResourceName[N2F4]]
	{
		SUBTYPE
		{
			name = N2F4
			title = #LOC_ChemicalCore_N2F4_title
			primaryColor = #$@ChemicalCoreResourceColors/N2F4$
			secondaryColor = #$@ChemicalCoreResourceColors/N2F4$
			upgradeRequired = chemical-propulsion-partupgrade-N2F4
		}
	}
}

// Add empty subtype to tanks
@PART:HAS[#chemTechTankType,!MODULE[ModuleEngines*]:HAS[#chemTechEngineType]]:AFTER[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixer*Switch]],*
	{
		SUBTYPE
		{
			name = none
			title = #LOC_ChemicalPropulsion_none_title
		}
	}
}

// Remove part upgrade restriction on default subtype
@PART:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixer*Switch]]]:AFTER[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixer*Switch]]
	{
		@SUBTYPE,0
		{
			-upgradeRequired = _
		}
	}
}

// Part switch module identifiers for primary FuelMixer modules
@PART:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerPropellantSwitch]]]:AFTER[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerPropellantSwitch]]
	{
		@SUBTYPE,*
		{
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleFuelMixerPropellant
					moduleID = chemTechFuelMixerPropellant
				}
				DATA
				{
					resourceName = #$../../name$
				}
			}
		}
	}
}
@PART:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch]]]:AFTER[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch]]
	{
		@SUBTYPE,*
		{
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleFuelMixerPropellant
					moduleID = chemTechFuelMixerFuel
				}
				DATA
				{
					resourceName = #$../../name$
				}
			}
		}
	}
}
@PART:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerOxidizerSwitch]]]:AFTER[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerOxidizerSwitch]]
	{
		@SUBTYPE,*
		{
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleFuelMixerPropellant
					moduleID = chemTechFuelMixerOxidizer
				}
				DATA
				{
					resourceName = #$../../name$
				}
			}
		}
	}
}

// Part switch module identifiers for secondary FuelMixer modules used in multi mode engines
@PART:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerPropellantSwitch]],@MODULE[ModuleFuelMixerPropellant]:HAS[#moduleID[chemTechFuelMixerPropellant2]]]:AFTER[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerPropellantSwitch]]
	{
		@SUBTYPE,*
		{
			+MODULE
			{
				@IDENTIFIER
				{
					@moduleID = chemTechFuelMixerPropellant2
				}
			}
		}
	}
}
@PART:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch]],@MODULE[ModuleFuelMixerPropellant]:HAS[#moduleID[chemTechFuelMixerFuel2]]]:AFTER[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerFuelSwitch]]
	{
		@SUBTYPE,*
		{
			+MODULE
			{
				@IDENTIFIER
				{
					@moduleID = chemTechFuelMixerFuel2
				}
			}
		}
	}
}
@PART:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerOxidizerSwitch]],@MODULE[ModuleFuelMixerPropellant]:HAS[#moduleID[chemTechFuelMixerOxidizer2]]]:AFTER[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemTechFuelMixerOxidizerSwitch]]
	{
		@SUBTYPE,*
		{
			+MODULE
			{
				@IDENTIFIER
				{
					@moduleID = chemTechFuelMixerOxidizer2
				}
			}
		}
	}
}